#include <stdio.h>

#include "terminal.h"
#include "../pet/pet.h"

static char (*currentStage)[16];

static char eggStage[16][16] ={
    {' ', ' ', ' ', ' ', ' ', ' ', '1', '1', '1', '1', ' ', ' ', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' '},
    {' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' '},
    {' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' '},
    {' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', ' ', ' ', '1', '1', '1', '1', ' ', ' ', ' ', ' ', ' ', ' '},
};

static char babyStage[16][16] ={
    {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', '1', '1', '1', ' ', ' ', ' ', ' ', '1', '1', '1', ' ', ' ', ' '},
    {' ', ' ', '1', '1', '1', '1', ' ', ' ', ' ', ' ', '1', '1', '1', '1', ' ', ' '},
    {' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' '},
    {' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', '1', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', '1', ' '},
    {' ', '1', ' ', ' ', '1', ' ', '1', ' ', ' ', ' ', '1', ' ', '1', ' ', '1', ' '},
    {' ', '1', ' ', ' ', '1', ' ', '1', ' ', ' ', ' ', '1', ' ', '1', ' ', '1', ' '},
    {' ', '1', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', '1', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', ' ', ' ', '1', '1', '1', '1', ' ', ' ', '1', '1', '1', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' '},
};

static char childStage[16][16] ={
    {' ', '1', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', '1', '1', ' '},
    {' ', '1', '1', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', '1', '1', '1', ' '},
    {' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' '},
    {' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' '},
    {' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', '1', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', '1', ' '},
    {' ', '1', ' ', ' ', '1', ' ', '1', ' ', ' ', ' ', '1', ' ', '1', ' ', '1', ' '},
    {' ', '1', ' ', ' ', '1', ' ', '1', ' ', ' ', ' ', '1', ' ', '1', ' ', '1', ' '},
    {' ', '1', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', '1', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', ' ', '1', '1', '1', '1', '1', '1', ' ', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' '},
};

static char teenStage[16][16] = {
    {' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', '1', '1', '1', '1', ' ', ' ', '1', '1', '1', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' ', ' '},
    {' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', '1', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', '1', ' '},
    {' ', '1', ' ', ' ', '1', ' ', '1', ' ', ' ', ' ', '1', ' ', '1', ' ', '1', ' '},
    {' ', '1', ' ', ' ', '1', ' ', '1', ' ', ' ', ' ', '1', ' ', '1', ' ', '1', ' '},
    {' ', '1', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', '1', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', ' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', '1', ' ', '1', ' ', ' ', ' ', ' ', '1', ' ', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', '1', '1', '1', ' ', ' ', ' ', ' ', '1', '1', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', ' ', '1', ' ', '1', '1', ' ', '1', ' ', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' '},
};

static char adultStage[16][16] ={
    {' ', ' ', ' ', '1', '1', '1', ' ', ' ', ' ', ' ', '1', '1', '1', ' ', ' ', ' '},
    {' ', ' ', '1', '1', '1', '1', '1', ' ', ' ', '1', '1', '1', '1', '1', ' ', ' '},
    {' ', ' ', '1', '1', '1', '1', '1', ' ', ' ', '1', '1', '1', '1', '1', ' ', ' '},
    {' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' '},
    {' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', '1', ' ', '1', '1', '1', ' ', ' ', ' ', '1', '1', '1', ' ', ' ', '1', ' '},
    {' ', '1', ' ', '1', '1', ' ', '1', ' ', ' ', '1', '1', ' ', '1', ' ', '1', ' '},
    {' ', '1', ' ', '1', '1', ' ', '1', ' ', ' ', '1', '1', ' ', '1', ' ', '1', ' '},
    {' ', '1', ' ', '1', '1', '1', ' ', ' ', ' ', '1', '1', '1', ' ', ' ', '1', ' '},
    {' ', ' ', '1', ' ', ' ', ' ', ' ', '1', '1', ' ', ' ', ' ', ' ', '1', ' ', ' '},
    {' ', ' ', ' ', '1', '1', '1', '1', '1', '1', '1', '1', '1', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' ', ' ', ' ', '1', ' ', ' ', ' ', ' '},
    {' ', ' ', ' ', '1', ' ', '1', ' ', ' ', ' ', ' ', '1', ' ', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', '1', '1', '1', ' ', ' ', ' ', ' ', '1', '1', '1', ' ', ' ', ' '},
    {' ', ' ', ' ', ' ', ' ', '1', ' ', '1', '1', ' ', '1', ' ', ' ', ' ', ' ', ' '},
};

void Terminal_inputPetName(char* name)
{
    printf("Input Pet Name: ");
    scanf("%s", name);
}

void Terminal_printNewPetMsg(char* name)
{
    printf("Creating new Pet named: %s\n", name);
}

void Terminal_printLoadedPetMsg(char* name)
{
    printf("Loading existing Pet named: %s\n", name);
}

void changeCurrentStage() 
{
    PetStage stage = Pet_getStage();
    if (stage == Stage_EGG) {
        currentStage = eggStage;
    } else if (stage == Stage_BABY) {
        currentStage = babyStage;
    } else if (stage == Stage_CHILD) {
        currentStage = childStage;
    } else if (stage == Stage_TEEN) {
        currentStage = teenStage;
    } else {
        currentStage = adultStage;
    }
}

void Terminal_printPet()
{
    changeCurrentStage();
    for (int i = 0; i < 16; i++) {
        for (int j = 0; j < 16; j++) {
            char pixel = currentStage[i][j];
            if (pixel == '1') {
                printf("X");
            } else {
                printf(" ");
            }
        }
        printf("\n");
    }
}

static void printSymbols(int num)
{
    for (int i = 0; i < num; i++) {
        printf("X");
    }
    for (int i = 0; i < 5-num; i++) {
        printf("O");
    }
}

void Terminal_printPetStats()
{
    printf("Mood: ");
    printSymbols(Pet_getMood());
    
    printf(" Hunger: ");
    printSymbols(Pet_getHunger());

    printf(" Friendship: ");
    printSymbols(Pet_getFriendship());

    printf("\n");
}

void Terminal_printAdvancedPetStats()
{
    char name[PET_NAME_MAX];
    Pet_getName(name);
    printf("Name: %s ", name);
    printf("Age: %d ", Pet_getAge());
    printf("Mood: %d ", Pet_getMoodNum());
    printf("Hunger: %d ", Pet_getHungerNum());

    printf("Friendship: %d ", Pet_getFriendshipNum());
    printf("Weight: %d\n", Pet_getWeight());
}